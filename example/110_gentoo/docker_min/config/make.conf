ARCH_SPECIFIC_OPTS=" -march=x86-64-v3 -mtune=znver4 --param l1-cache-size=32 --param l1-cache-line-size=64 --param l2-cache-size=512"
# Flags supported by BOTH Threadripper 7955WX and Ryzen 7735HS
CPU_FLAGS_X86="aes avx avx2 bmi1 bmi2 f16c fma3 mmx mmxext pclmul popcnt rdrand sha sse sse2 sse3 sse4_1 sse4_2 sse4a ssse3 vpclmulqdq"
COMMON_FLAGS=" -march=znver3 -fomit-frame-pointer -O2 -pipe "
CFLAGS="${COMMON_FLAGS}"
CXXFLAGS="${COMMON_FLAGS}"
FCFLAGS="${COMMON_FLAGS}"
FFLAGS="${COMMON_FLAGS}"
LC_MESSAGES=C.utf8
MAKEOPTS="-j33"
NINJAOPTS="-j33"
EMERGE_DEFAULT_OPTS="--jobs 24 --load-average 32"
VIDEO_CARDS=""
USE="-* minimal reference gnu jumbo-build \
-accessibility -activities -bluetooth \
-gstreamer -gtk -gtk3 -haptic -initramfs -ipv6 -lvm -modemmanager -networkmanager \
-phonon -ppp -pulseaudio -screencast -semantic-desktop -thin -thumbnail -wext -wifi \
-wireless " # consider lto to reduce size
INSTALL_MASK="/usr/share/gtk-doc /usr/share/doc /usr/share/locale/* /usr/share/man/* /usr/share/info/*"
#INSTALL_MASK="/etc/systemd /lib/systemd /usr/lib/systemd /usr/lib/modules-load.d *udev* /usr/lib/tmpfiles.d *tmpfiles* /var/lib/dbus /usr/bin/gdbus /lib/udev"
FEATURES="noman nodoc noinfo" # disable documentation
PYTHON_TARGETS="python3_13"
PYTHON_SINGLE_TARGET="python3_13"
L10N="en-GB"
LLVM_TARGETS="X86"
GENTOO_MIRRORS="https://mirror.init7.net/gentoo/ \
    rsync://mirror.init7.net/gentoo/ \
    http://mirrors.ircam.fr/pub/gentoo-distfiles/ \
    http://ftp.fau.de/gentoo \
    rsync://ftp.fau.de/gentoo \
    http://ftp-stud.hs-esslingen.de/pub/Mirrors/gentoo/ \
    rsync://ftp-stud.hs-esslingen.de/gentoo/ \
    http://ftp.uni-stuttgart.de/gentoo-distfiles/"
http_proxy="http://10.60.120.81:3142"
RUBY_TARGETS="ruby33"

